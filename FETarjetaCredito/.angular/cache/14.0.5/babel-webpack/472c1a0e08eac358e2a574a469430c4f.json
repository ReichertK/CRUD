{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"src/app/services/tarjeta.service\";\nimport * as i4 from \"@angular/common\";\n\nfunction TarjetaCreditoComponent_tr_45_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"i\", 26);\n    i0.ɵɵlistener(\"click\", function TarjetaCreditoComponent_tr_45_Template_i_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const tarjeta_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.editarTarjeta(tarjeta_r1));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"td\")(10, \"i\", 27);\n    i0.ɵɵlistener(\"click\", function TarjetaCreditoComponent_tr_45_Template_i_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const tarjeta_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.eliminarTarjeta(tarjeta_r1.id));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const tarjeta_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(tarjeta_r1.titular);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(tarjeta_r1.numeroTarjeta);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(tarjeta_r1.fechaExpiracion);\n  }\n}\n\nexport let TarjetaCreditoComponent = /*#__PURE__*/(() => {\n  class TarjetaCreditoComponent {\n    constructor(fb, toastr, _tarjetaService) {\n      this.fb = fb;\n      this.toastr = toastr;\n      this._tarjetaService = _tarjetaService;\n      this.listTarjetas = [];\n      this.accion = 'Agregar';\n      this.form = this.fb.group({\n        titular: ['', Validators.required],\n        numeroTarjeta: ['', [Validators.required, Validators.maxLength(16), Validators.minLength(16)]],\n        fechaExpiracion: ['', [Validators.required, Validators.maxLength(5), Validators.minLength(5)]],\n        cvv: ['', [Validators.required, Validators.maxLength(3), Validators.minLength(3)]]\n      });\n    }\n\n    ngOnInit() {\n      this.obtenerTarjetas();\n    }\n\n    obtenerTarjetas() {\n      this._tarjetaService.getListTarjetas().subscribe(data => {\n        console.log(data);\n        this.listTarjetas = data;\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    guardarTarjeta() {\n      var _a, _b, _c, _d;\n\n      const tarjeta = {\n        titular: (_a = this.form.get('titular')) === null || _a === void 0 ? void 0 : _a.value,\n        numeroTarjeta: (_b = this.form.get('numeroTarjeta')) === null || _b === void 0 ? void 0 : _b.value,\n        fechaExpiracion: (_c = this.form.get('fechaExpiracion')) === null || _c === void 0 ? void 0 : _c.value,\n        cvv: (_d = this.form.get('cvv')) === null || _d === void 0 ? void 0 : _d.value\n      };\n\n      if (this.id == undefined) {\n        // Agregamos una nueva tarjeta\n        this._tarjetaService.saveTarjeta(tarjeta).subscribe(data => {\n          this.toastr.success('La tarjeta fue registrada con exito!', 'Tarjeta Registrada');\n          this.obtenerTarjetas();\n          this.form.reset();\n        }, error => {\n          this.toastr.error('Opss.. ocurrio un error', 'Error');\n          console.log(error);\n        });\n      } else {\n        tarjeta.id = this.id; // Editamos tarjeta\n\n        this._tarjetaService.updateTarjeta(this.id, tarjeta).subscribe(data => {\n          this.form.reset();\n          this.accion = 'Agregar';\n          this.id = undefined;\n          this.toastr.info('La tarjeta fue actualizada con exito!', 'Tarjeta Actualizada');\n          this.obtenerTarjetas();\n        }, error => {\n          console.log(error);\n        });\n      }\n    }\n\n    eliminarTarjeta(id) {\n      this._tarjetaService.deleteTarjeta(id).subscribe(data => {\n        this.toastr.error('La tarjeta fue eliminada con exito!', 'Tarjeta eliminada');\n        this.obtenerTarjetas();\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    editarTarjeta(tarjeta) {\n      this.accion = 'Editar';\n      this.id = tarjeta.id;\n      this.form.patchValue({\n        titular: tarjeta.titular,\n        numeroTarjeta: tarjeta.numeroTarjeta,\n        fechaExpiracion: tarjeta.fechaExpiracion,\n        cvv: tarjeta.cvv\n      });\n    }\n\n  }\n\n  TarjetaCreditoComponent.ɵfac = function TarjetaCreditoComponent_Factory(t) {\n    return new (t || TarjetaCreditoComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.TarjetaService));\n  };\n\n  TarjetaCreditoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TarjetaCreditoComponent,\n    selectors: [[\"app-tarjeta-credito\"]],\n    decls: 46,\n    vars: 22,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"row\"], [1, \"col-lg-8\", \"offset-lg-2\"], [1, \"card\"], [1, \"card-body\"], [1, \"titulo\"], [1, \"row\", \"mt-4\"], [1, \"col-lg-6\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"input-group\", \"input-group-lg\", \"mb-3\"], [1, \"input-group-text\"], [1, \"fas\", \"fa-user\"], [\"formControlName\", \"titular\", \"type\", \"text\", \"placeholder\", \"Titular\", 1, \"form-control\"], [1, \"fas\", \"fa-credit-card\"], [\"formControlName\", \"numeroTarjeta\", \"maxlength\", \"16\", \"type\", \"text\", \"placeholder\", \"Numero Tarjeta\", 1, \"form-control\"], [1, \"col-lg-7\"], [1, \"fas\", \"fa-calendar-alt\"], [\"formControlName\", \"fechaExpiracion\", \"maxlength\", \"5\", \"type\", \"text\", \"placeholder\", \"MM/YY\", 1, \"form-control\"], [1, \"col-lg-5\"], [1, \"fas\", \"fa-key\"], [\"formControlName\", \"cvv\", \"maxlength\", \"3\", \"type\", \"password\", \"placeholder\", \"CVV\", 1, \"form-control\"], [1, \"d-grid\", \"gap-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", \"btn-lg\", 3, \"disabled\"], [1, \"fas\", \"fa-database\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"far\", \"fa-edit\", \"text-info\", 3, \"click\"], [1, \"far\", \"fa-trash-alt\", \"text-danger\", 3, \"click\"]],\n    template: function TarjetaCreditoComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h3\", 5);\n        i0.ɵɵtext(6, \"TARJETA CREDITO\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(7, \"div\", 6)(8, \"div\", 7)(9, \"div\", 3)(10, \"div\", 4)(11, \"h5\", 5);\n        i0.ɵɵtext(12);\n        i0.ɵɵpipe(13, \"uppercase\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"form\", 8);\n        i0.ɵɵlistener(\"ngSubmit\", function TarjetaCreditoComponent_Template_form_ngSubmit_14_listener() {\n          return ctx.guardarTarjeta();\n        });\n        i0.ɵɵelementStart(15, \"div\", 9)(16, \"span\", 10);\n        i0.ɵɵelement(17, \"i\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"input\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 9)(20, \"span\", 10);\n        i0.ɵɵelement(21, \"i\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"input\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 1)(24, \"div\", 15)(25, \"div\", 9)(26, \"span\", 10);\n        i0.ɵɵelement(27, \"i\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"input\", 17);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"div\", 18)(30, \"div\", 9)(31, \"span\", 10);\n        i0.ɵɵelement(32, \"i\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"input\", 20);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(34, \"div\", 21)(35, \"button\", 22);\n        i0.ɵɵelement(36, \"i\", 23);\n        i0.ɵɵtext(37, \"\\u00A0 Aceptar\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(38, \"div\", 7)(39, \"div\", 3)(40, \"div\", 4)(41, \"h5\", 5);\n        i0.ɵɵtext(42, \"LISTADO DE TARJETAS\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"table\", 24)(44, \"tbody\");\n        i0.ɵɵtemplate(45, TarjetaCreditoComponent_tr_45_Template, 11, 3, \"tr\", 25);\n        i0.ɵɵelementEnd()()()()()()();\n      }\n\n      if (rf & 2) {\n        let tmp_2_0;\n        let tmp_3_0;\n        let tmp_4_0;\n        let tmp_5_0;\n        let tmp_6_0;\n        let tmp_7_0;\n        let tmp_8_0;\n        let tmp_9_0;\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(13, 20, ctx.accion), \" TARJETA\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(3);\n        i0.ɵɵclassProp(\"green-icon\", (tmp_2_0 = ctx.form.get(\"titular\")) == null ? null : tmp_2_0.valid)(\"red-icon\", ((tmp_3_0 = ctx.form.get(\"titular\")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx.form.get(\"titular\")) == null ? null : tmp_3_0.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵclassProp(\"green-icon\", (tmp_4_0 = ctx.form.get(\"numeroTarjeta\")) == null ? null : tmp_4_0.valid)(\"red-icon\", ((tmp_5_0 = ctx.form.get(\"numeroTarjeta\")) == null ? null : tmp_5_0.invalid) && ((tmp_5_0 = ctx.form.get(\"numeroTarjeta\")) == null ? null : tmp_5_0.touched));\n        i0.ɵɵadvance(6);\n        i0.ɵɵclassProp(\"green-icon\", (tmp_6_0 = ctx.form.get(\"fechaExpiracion\")) == null ? null : tmp_6_0.valid)(\"red-icon\", ((tmp_7_0 = ctx.form.get(\"fechaExpiracion\")) == null ? null : tmp_7_0.invalid) && ((tmp_7_0 = ctx.form.get(\"fechaExpiracion\")) == null ? null : tmp_7_0.touched));\n        i0.ɵɵadvance(5);\n        i0.ɵɵclassProp(\"green-icon\", (tmp_8_0 = ctx.form.get(\"cvv\")) == null ? null : tmp_8_0.valid)(\"red-icon\", ((tmp_9_0 = ctx.form.get(\"cvv\")) == null ? null : tmp_9_0.invalid) && ((tmp_9_0 = ctx.form.get(\"cvv\")) == null ? null : tmp_9_0.touched));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", ctx.form.invalid);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.listTarjetas);\n      }\n    },\n    dependencies: [i4.NgForOf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MaxLengthValidator, i1.FormGroupDirective, i1.FormControlName, i4.UpperCasePipe],\n    styles: [\".far[_ngcontent-%COMP%]{cursor:pointer}.green-icon[_ngcontent-%COMP%]{color:#198754}.red-icon[_ngcontent-%COMP%]{color:#dc3545}\"]\n  });\n  return TarjetaCreditoComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}